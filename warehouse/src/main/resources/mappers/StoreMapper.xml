<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.msb.mapper.StoreMapper">


    <!--查询所有仓库-->
    <select id="queryAllStores" resultType="Store">
        select * from store
    </select>

    <!--查询所有的仓库名称-->
    <select id="findAllStore" resultType="store" >
        select * from store
    </select>


    <!--selectStorePage多添加查询仓库-->
    <select id="selectStorePage" resultType="store" >
        select  *
        from store
        <where>
            <if test="store.storeName != null and store.storeName != ''">
                and store_name like concat('%',#{store.storeName},'%')
            </if>
            <if test="store.storeAddress != null and store.storeAddress != ''">
                and store_address like concat ('%',#{store.storeAddress},'%')
            </if>
            <if test="store.concat != null and store.concat !=''">
                and concat like concat ('%',#{store.concat},'%')
            </if>
            <if test="store.phone != null and store.phone != ''">
                and phone like concat ('%',#{store.phone},'%')
            </if>
        </where>
        limit #{page.limitIndex}, #{page.pageSize}
    </select>

    <!--查村仓库的总条数-->
    <select id="selectStoreCount" resultType="int">
        select count(1)
        from store
        <where>
            <if test="store.storeName != null and store.storeName != ''">
                and store_name like concat('%',#{store.storeName},'%')
            </if>
            <if test="store.storeAddress != null and store.storeAddress != ''">
                and store_address like concat ('%',#{store.storeAddress},'%')
            </if>
            <if test="store.concat != null and store.concat !=''">
                and concat like concat ('%',#{store.concat},'%')
            </if>
            <if test="store.phone != null and store.phone != ''">
                and phone like concat ('%',#{store.phone},'%')
            </if>
        </where>
    </select>

    <!--
            //添加仓库
    Integer insertStore(@Param("store") Store store);
    -->
    <insert id="insertStore" parameterType="store" >
        INSERT into store VALUES(null,#{store.storeName},#{store.storeNum},#{store.storeAddress},#{store.concat},#{store.phone})
    </insert>
    <!--
                //根据仓库id 进行删除
    Integer deleteStoreById(Integer storeId);
    -->
    <delete id="deleteStoreById" >
        delete from store
        where store_id=#{storeId}
    </delete>
    <update id="updateStore">
        update store
        set store_name=#{store.storeName},store_address=#{store.storeAddress},
            concat=#{store.concat},phone=#{store.phone}
        where store_num =#{store.storeNum}
    </update>


    <!--
    //通过仓库名称查询仓库对象
    Store selectStoreByName(String storeName);
        -->
    <select id="selectStoreByName" resultType="store">
        select  * from store where store_name=#{storeName}
    </select>

    <!--
        //通过仓库编号查询仓库对象
    -->
    <select id="selectStoreByNum" resultType="com.msb.pojo.Store">
        select *
        from store
        where store_num=#{storeNum}
    </select>
    <!--修改仓库时通过名称查看是否有-->
    <select id="selectStoreByNoName" resultType="com.msb.pojo.Store">
        select  * from store where   store_name = #{storeName} and store_id !=#{storeId}
    </select>
    <!--查询所有仓库-->
    <select id="queryAllStore" resultType="com.msb.pojo.Store">
        select * from store
    </select>
</mapper>